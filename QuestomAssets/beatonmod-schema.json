{
	"$schema": "http://json-schema.org/draft-07/schema",
	"$id": "beatonmod",
	"$comment": "The BeatOn Mod Schema",
	"title": "BeatOn Mod",
	"type": "object",
	"properties": {
		"id": {
			"title": "ID",
			"description": "The ID of the mod, NO SPACES!",
			"type": "string"
		},
		"name": {
			"title": "Name",
			"description": "The name of the mod",
			"type": "string"
		},
		"porter": {
			"title": "Porter",
			"description": "The name of the person who ported the mod to Quest",
			"type": "string"
		},
		"author": {
			"title": "Author",
			"description": "The author of the mod",
			"type": "string"
		},
		"description": {
			"title": "Description",
			"description": "The description of the mod. Each line is separated by a newline",
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"category": {
			"title": "Category",
			"description": "The category of the mod",
			"type": "string",
			"enum": [
				"Saber",
				"Gameplay",
				"Library",
				"Note",
				"Other"
			]
		},
		"gameVersion": {
			"title": "Beat Saber Version",
			"description": "The Beat Saber Version for the mod",
			"type": "string"
		},
		"version": {
			"title": "Version",
			"description": "The version of the mod (3 DIGITS!)",
			"type": "string",
			"pattern": "^\\d+.\\d+.\\d+$"
		},
		"links": {
			"description": "Links of the mod",
			"type": "object",
			"properties": {
				"project-home": {
					"type": "string"
				}
			}
		},
		"platform": {
			"type": "string",
			"enum": [
				"Quest"
			]
		},
		"coverImageFilename": {
			"description": "The cover image's filename",
			"type": "string"
		},
		"icon": {
			"title": "Icon",
			"description": "The cover image's filename",
			"type":  "string"
		},
		"components": {
			"title": "Components",
			"description": "Components of the mod",
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"Type": {
						"title": "Type",
						"description": "The type of the mod component",
						"enum": [
							"AssetsMod",
							"HookMod"
						]
					}
				},
				"if": {
					"properties": {
						"Type": {
							"enum": [ "AssetsMod" ]
						}
					},
					"required": [ "Type" ]
				},
				"then": {
					"properties": {
						"InstallAction": {
							"$ref": "AssetsActionSchema.json",
							"properties": {
								"Actions": {
									"items": {
										"properties": {
											"Type": {
												"enum": [
													"ReplaceAsset",
													"CreateAsset"
												]
											}
										},
										"required": [
											"Type",
											"StepNumber",
											"Locator",
											"FromDataFile"
										]
									}
								}
							}
						},
						"UninstallAction": {
							"$ref": "AssetsActionSchema.json",
							"properties": {
								"Actions": {
									"items": {
										"properties": {
											"Type": {
												"enum": [
													"RestoreAsset"
												]
											}
										},
										"required": [
											"Type",
											"StepNumber",
											"Locator"
										]
									}
								}
							}
						}
					}
				},
				"else": {
					"if": {
						"properties": {
							"Type": {
								"enum": [ "HookMod" ]
							}
						},
						"required": [ "Type" ]
					},
					"then": {
						"properties": {
							"InstallAction": {
								"$ref": "HookActionSchema.json",
								"required": [
									"InstallLibraryFile"
								]
							},
							"UninstallAction": {
								"$ref": "HookActionSchema.json",
								"required": [
									"RemoveLibraryFile"
								]
							}
						}
					}
				},
				"required": [
					"Type",
					"InstallAction",
					"UninstallAction"
				],
				"additionalProperties": false
			}
		}
	},
	"required": [
		"id",
		"name",
		"author",
		"description",
		"category",
		"gameVersion",
		"version",
		"platform",
		"links",
		"components"
	],
	"additionalProperties": false
}